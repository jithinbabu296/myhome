<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="delivery_address_change" inherit_id="stock.report_delivery_document">
            <xpath expr='//t[@name="partner_header"]' position="inside">
                <div style="margin-right:500px;margin-top:-110px;margin-bottom:10px;">
                    <strong>Delivery Address</strong>
                    <div t-esc="partner"
                         t-options='{"widget": "contact", "fields": ["address", "name", "phone"], "no_marker": True}'/>
                </div>
            </xpath>
            <xpath expr='//table[@name="stock_move_table"]' position="replace">
                <table class="table table-sm" t-if="o.state!='done'" name="stock_move_table">
                    <thead>
                        <tr>
                            <th name="th_sm_product"><strong>Product</strong></th>
                            <th name="th_sm_quantity"><strong>Quantity</strong></th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="lines" t-value="o.move_lines.filtered(lambda x: x.product_uom_qty)"/>
                        <tr t-foreach="lines" t-as="move">
                            <td>
                                <span t-field="move.product_id"/>
                                <br>
                                    <span t-field="move.product_id.description_sale"/>
                                </br>
                            </td>
                            <td>
                                <span t-field="move.product_uom_qty"/>
                                <span t-field="move.product_uom"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </xpath>
            <xpath expr='//table[@name="stock_move_line_table"]' position="replace">
                <table class="table table-sm mt48" t-if="o.move_line_ids and o.state=='done'"
                       name="stock_move_line_table">
                    <thead>
                        <tr>
                            <th name="th_sml_product"><strong>Product</strong></th>
                            <th name="th_sml_quantity"><strong>Quantity</strong></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr t-foreach="o.move_line_ids" t-as="move_line">
                            <td>
                                <span t-field="move_line.product_id"/>
                                <br>
                                    <span t-field="move_line.product_id.description_sale"/>
                                </br>
                            </td>
                            <td >
                                <span t-field="move_line.qty_done"/>
                                <span t-field="move_line.product_uom_id"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </xpath>
        </template>
    </data>
</odoo>